%tr
  %td.link_column
    = link_to section_training_path(training, section_id: current_section.to_param), class: :eye_link do
      %span.glyphicon.glyphicon-eye-open
  %td
    %div= training.start_datetime.strftime("%-d %b %Y %R")
    = render partial: 'locations/gmaps_link', locals: {location: training.location}
  %td.hidden-xs><
    = training.group_names
  %td.hidden-xs><
    (
    %span{class: 'text-success'}><= training.nb_presents
    \/
    %span{class: 'text-danger'}><= training.nb_not_presents
    \/
    %span{class: 'text-warning'}><= training.nb_presence_not_set
    )
  - if current_user.is_player_of?(current_section)
    %td
      - if current_user.is_present_for?(training).nil?
        = link_to 'Présent ?', training_presences_user_path(current_user, present_ids: [training.id], checked_ids: [training.id]), method: :post, class: 'btn btn-sm btn-success text-nowrap'
        = link_to 'Non présent ?', training_presences_user_path(current_user, present_ids: [training.id], checked_ids: []), method: :post, class: 'btn btn-sm btn-danger text-nowrap'
      - elsif current_user.is_present_for?(training) == true
        %div.training_presence{class: 'bg-success text-nowrap'} Présent !
        = link_to 'Non présent', training_presences_user_path(current_user, present_ids: [training.id], checked_ids: []), method: :post, class: 'change_presence not_present text-nowrap'
      - else
        %div.training_presence{class: 'bg-danger text-nowrap'} Non présent !
        = link_to 'Présent', training_presences_user_path(current_user, present_ids: [training.id], checked_ids: [training.id]), method: :post, class: 'change_presence present text-nowrap'
  - if current_user.is_coach_of?(current_section)
    %td
      = button_to '(Ré)envoyer les invitations', invitations_section_training_path(training, section_id: current_section), id: "training_invitations_#{training.id}", class: 'btn btn-warning btn-sm'